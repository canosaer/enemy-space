class Game{constructor(){this.referenceDeck=new Deck,this.gameDeck=new Deck,this.player=new Player,this.setupListeners(),new MessageHandler,this.setupShip(),this.setupCrew()}setupListeners(){document.querySelector(".game-display__title").addEventListener("click",this.returnToTitle),document.querySelector(".game-display__subtitle").addEventListener("click",this.returnToTitle),document.addEventListener("removeCrewListeners",this.toggleCrewListeners),document.addEventListener("advancePhase",this.advancePhase)}returnToTitle(){localStorage.setItem("dm21GameState","paused"),document.querySelector(".title-screen").classList.remove("hidden"),document.querySelector(".game-display").classList.add("hidden")}setupShip=()=>{this.player.components.installed=[this.referenceDeck.cards[5],this.referenceDeck.cards[6],this.referenceDeck.cards[9],this.referenceDeck.cards[1]];let e=new CustomEvent("renderInstalledComponents");document.dispatchEvent(e)};setupCrew=()=>{this.logMessage('Select Crew: Under "Crew," click on your Pilot, Gunner, or Engineer to add a +2 bonus to that crew member.'),sessionStorage.setItem("dm21IncreaseLevel","2"),sessionStorage.setItem("dm21GamePhase","crewSetup"),this.toggleCrewListeners()};advancePhase=e=>{"crewSetup"===sessionStorage.getItem("dm21GamePhase")&&(sessionStorage.setItem("dm21GamePhase","playerTurn"),this.playerTurn())};toggleCrewListeners=()=>{crewElements.forEach((e=>{e.classList.toggle("clickable")})),crewElements[0].classList.contains("clickable")?(crewContainer.querySelector(".crew__pilot").addEventListener("click",this.increasePilot),crewContainer.querySelector(".crew__gunner").addEventListener("click",this.increaseGunner),crewContainer.querySelector(".crew__engineer").addEventListener("click",this.increaseEngineer)):(crewContainer.querySelector(".crew__pilot").removeEventListener("click",this.increasePilot),crewContainer.querySelector(".crew__gunner").removeEventListener("click",this.increaseGunner),crewContainer.querySelector(".crew__engineer").removeEventListener("click",this.increaseEngineer))};increasePilot=()=>{let e=new CustomEvent("increaseCrew",{detail:{crew:"pilot"}});document.dispatchEvent(e)};increaseGunner=()=>{let e=new CustomEvent("increaseCrew",{detail:{crew:"gunner"}});document.dispatchEvent(e)};increaseEngineer=()=>{let e=new CustomEvent("increaseCrew",{detail:{crew:"engineer"}});document.dispatchEvent(e)};logMessage(e){let t=new CustomEvent("message",{detail:{message:e}});document.dispatchEvent(t)}startGame=()=>{console.log("The game has begun!")};addCardToBoard(e,t){const r=document.querySelector(".deck"),n=e.render(t);r.appendChild(n)}saveGame(){localStorage.setItem("dm21Save",JSON.stringify({player:this.player,gameDeck:this.gameDeck}))}loadGame(){try{const e=JSON.parse(localStorage.getItem("dm21Save"));if(e&&e.gameDeck)return this.gameDeck=Deck().restore(e.gameDeck.cards),this.player=Player().restore(e.player.bonus,e.player.crewElements,e.player.components,e.player.repeat),!0}catch(e){console.error("no game state")}return!1}}
//# sourceMappingURL=game.js.map